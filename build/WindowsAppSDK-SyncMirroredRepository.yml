name: $(BuildDefinitionName)_$(date:yyMM).$(date:dd)$(rev:rrr)
parameters:
- name: "SourceToTargetBranch"
  displayName: "VSIXs to Publish to Download Center"
  type: object
  default:
    develop: develop
    main: main

jobs:
- job: SyncMirror
  strategy:
    matrix: 
      ${{ each branches in parameters.SourceToTargetBranch }}:
        ${{ branches.key }}:
          SourceBranch: ${{ branches.key }}
          TargetBranch: ${{ branches.value }}
  dependsOn: []
  pool: 'ProjectReunionESPool-2022'
  steps:
      - template: ..\eng\common\AzurePipelinesTemplates\WindowsAppSDK-SyncMirror-Steps.yml
        parameters:
          SourceRepository: "https://github.com/microsoft/WindowsAppSDK.git"
          TargetBranch: $(TargetBranch)
          SourceBranch: $(SourceBranch)
