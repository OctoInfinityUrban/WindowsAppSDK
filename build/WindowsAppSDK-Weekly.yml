# https://aka.ms/yaml
parameters:
  - name: "ReleaseSigning"
    type: boolean
    default: False
  - name: "IgnoreFailures"
    type: boolean
    default: False
  - name: "PublishPackage"
    type: boolean
    default: False
  - name: "GenerateSBOM"
    type: boolean
    default: False
  # A main goal of this pipeline is to run time consuming static analysis, such as PREFast, weekly, 
  # hence the following 2 paramters default to true.
  - name: "RunSDLBinaryAnalysis"
    displayName: "Run SDL's Binary Analysis (PREFast, BinSkim)"
    type: boolean
    default: true
  - name: "enablePREFast"
    type: boolean
    default: true
  - name: "enableLicenseInstall"
    type: boolean
    default: true

stages:
- template: ProjectReunion-BuildFoundation.yml
  parameters:
    ReleaseSigning: ${{ parameters.ReleaseSigning }}
    IgnoreFailures: ${{ parameters.IgnoreFailures }}
    PublishPackage: ${{ parameters.PublishPackage }}
    GenerateSBOM: ${{ parameters.GenerateSBOM }}
    RunSDLBinaryAnalysis: ${{ parameters.RunSDLBinaryAnalysis }}
    enablePREFast: ${{ parameters.enablePREFast }}
    enableLicenseInstall: ${{ parameters.enableLicenseInstall }}
